(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const u of t.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function r(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(e){if(e.ep)return;e.ep=!0;const t=r(e);fetch(e.href,t)}})();var p={};const d=require("express"),m=require("morgan"),l=require("cors"),a=d();m.token("postData",o=>JSON.stringify(o.body));a.use(d.json());a.use(m(":method :url :status :res[content-length] - :response-time ms :postData"));a.use(l());let i=[{id:1,name:"Arto Hellas",number:"040-123456"},{id:2,name:"Ada Lovelace",number:"39-44-5323523"},{id:3,name:"Dan Abramov",number:"12-43-234345"},{id:4,name:"Mary Poppendieck",number:"39-23-6423122"}];a.get("/api/persons",(o,n)=>{n.json(i)});a.get("/info",(o,n)=>{const r=new Date,s=`
        <p>Phonebook has info for ${i.length} people</p>
        <p>${r}</p>`;n.send(s)});a.get("/api/persons/:id",(o,n)=>{const r=Number(o.params.id),s=i.find(e=>e.id===r);s?n.json(s):n.status(404).end()});a.delete("/api/persons/:id",(o,n)=>{const r=Number(o.params.id);i=i.find(s=>s.id!==r),n.status(204).end()});a.post("/api/persons",(o,n)=>{const r=o.body;if(!r||!r.name||!r.number)return n.status(400).json({error:"name or number is missing"});if(i.find(t=>t.name===r.name))return n.status(400).json({error:"name must be unique"});const e={id:Math.floor(Math.random()*100),name:r.name,number:r.number};i=i.concat(e),n.json(i)});const c=p.PORT||3001;a.listen(c,()=>{console.log(`Server running on port ${c}`)});
