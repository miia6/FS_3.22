(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&t(u)}).observe(document,{childList:!0,subtree:!0});function r(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(e){if(e.ep)return;e.ep=!0;const o=r(e);fetch(e.href,o)}})();var d={};const m=require("cors"),a=express();a.use(m());let s=[{id:1,name:"Arto Hellas",number:"040-123456"},{id:2,name:"Ada Lovelace",number:"39-44-5323523"},{id:3,name:"Dan Abramov",number:"12-43-234345"},{id:4,name:"Mary Poppendieck",number:"39-23-6423122"}];a.get("/api/persons",(i,n)=>{n.json(s)});a.get("/info",(i,n)=>{const r=new Date,t=`
        <p>Phonebook has info for ${s.length} people</p>
        <p>${r}</p>`;n.send(t)});a.get("/api/persons/:id",(i,n)=>{const r=Number(i.params.id),t=s.find(e=>e.id===r);t?n.json(t):n.status(404).end()});a.delete("/api/persons/:id",(i,n)=>{const r=Number(i.params.id);s=s.find(t=>t.id!==r),n.status(204).end()});a.post("/api/persons",(i,n)=>{const r=i.body;if(!r||!r.name||!r.number)return n.status(400).json({error:"name or number is missing"});if(s.find(o=>o.name===r.name))return n.status(400).json({error:"name must be unique"});const e={id:Math.floor(Math.random()*100),name:r.name,number:r.number};s=s.concat(e),n.json(s)});const c=d.PORT||3001;a.listen(c,()=>{console.log(`Server running on port ${c}`)});
